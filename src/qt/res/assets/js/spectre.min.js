Number.prototype.countDecimals=function(){return Math.floor(this.valueOf())===this.valueOf()?0:this.toString().split(".")[1].length||0};var TYPE_PRIVATE="Private",TYPE_PUBLIC="Public",TYPE_ORPHAN="Orphan",TYPE_RECEIVED="Received",TYPE_SENT="Sent",TYPE_IN_OUT="In-Out",TYPE_STAKE="Stake",TYPE_DONATED="Donated",TYPE_CONTRIBUTED="Contributed",TYPE_OTHER="Other";function invalid(e,t){return!0===t?e.css("background","").css("color",""):e.css("background","#155b9a").css("color","white"),1==t}function updateValue(e){function t(t){var a=$(".newval");0!==a.length&&(e.html(a.val().trim()),e.parent("td").data("label",a.val().trim()))}$("#tooltip").remove();var a=void 0!==e.parent("td").data("label")&&e.parent("td").data("label").length>0?e.parent("td").data("label"):void 0!==e.data("value")&&e.data("value").length>0?e.data("value"):"",n=e.parents(".selected").find(".address"),s=e.parents(".selected").find(".addresstype");n=n.data("value")?n.data("value"):n.text(),1===s.length&&(s=s.data("value")?s.data("value"):s.text()),e.html('<input class="newval" type="text" onchange="bridge.updateAddressLabel(\''+n+'\', this.value);" value="'+a+'" size=60 />'),$(".newval").focus().on("contextmenu",(function(e){e.stopPropagation()})).keyup((function(e){13==e.keyCode&&t()})),$(document).one("click",t)}var connectSignalsAttempts=0;function connectSignals(){"undefined"!=typeof bridge&&"undefined"!=typeof optionsModel&&"undefined"!=typeof walletModel?(bridge.emitTransactions.connect(appendTransactions),bridge.emitAddresses.connect(appendAddresses),bridge.triggerElement.connect(triggerElement),bridge.networkAlert.connect(networkAlert),bridge.getAddressLabelResult.connect(getAddressLabelResult),bridge.getAddressLabelForSelectorResult.connect(getAddressLabelForSelectorResult),blockExplorerPage.connectSignals(),walletManagementPage.connectSignals(),optionsPage.connectSignals(),chainDataPage.connectSignals(),bridge.validateAddressResult.connect(validateAddressResult),bridge.transactionDetailsResult.connect(transactionDetailsResult),optionsModel.displayUnitChanged.connect(unit_setType),optionsModel.reserveBalanceChanged.connect(updateReserved),optionsModel.rowsPerPageChanged.connect(updateRowsPerPage),optionsModel.visibleTransactionsChanged.connect(visibleTransactions),walletModel.encryptionInfoChanged.connect(encryptionStatusChanged),walletModel.balanceChanged.connect(updateBalance),overviewPage.clientInfo(),optionsPage.update(),chainDataPage.updateAnonOutputs(),bridge.jsReady()):(connectSignalsAttempts+=1)<50?(console.log("retrying connecting signals in 200ms"),setTimeout(connectSignals,200)):(console.log("giving up on connecting signals."),console.log("bridge available: "+("undefined"!=typeof bridge)),console.log("optionsModel available: "+("undefined"!=typeof optionsModel)),console.log("walletModel available: "+("undefined"!=typeof walletModel)))}var connectClientSignalsAttempts=0;function connectClientSignals(){"undefined"!=typeof clientBridge&&"undefined"!=typeof bridge?(clientBridge.emitPaste.connect(pasteValue),clientBridge.emitCoinControlUpdate.connect(updateCoinControlInfo),clientBridge.triggerElement.connect(triggerElement),clientBridge.networkAlert.connect(networkAlert),clientBridge.emitReceipient.connect(addRecipientDetail),clientBridge.addRecipientResult.connect(addRecipientResult),clientBridge.sendCoinsResult.connect(sendCoinsResult),clientBridge.newAddressResult.connect(newAddressResult),clientBridge.updateElement.connect(updateElement),translateStrings(),sendPage.init()):(connectClientSignalsAttempts+=1)<50?(console.log("retrying connecting client signals in 200ms"),setTimeout(connectClientSignals,200)):(console.log("giving up on connecting client signals."),console.log("clientBridge available: "+("undefined"!=typeof clientBridge)),console.log("bridge available: "+("undefined"!=typeof bridge)))}function transactionDetailsResult(e){$("#transaction-info").html(e)}var numOfRecipients=void 0;function validateAddressResult(e){}function sendCoinsResult(e){console.log("sendCoinsResult"),console.log(e),sendPage.update(e,void 0)}function addRecipientResult(e){sendPage.update(void 0,e)}function encryptionStatusChanged(e){overviewPage.encryptionStatusChanged(e)}function unit_setType(e){unit.setType(e)}function updateCoinControlInfo(e,t,a,n,s,o,i,l){sendPage.updateCoinControlInfo(e,t,a,n,s,o,i,l)}function addRecipientDetail(e,t,a,n){sendPage.addRecipientDetail(e,t,a,n)}function updateReserved(e){overviewPage.updateReserved(e)}function updateBalance(e,t,a,n,s,o,i,l){overviewPage.updateBalance(e,t,a,n,s,o,i,l)}function triggerElement(e,t){$(e).trigger(t)}function updateRowsPerPage(e){$(".footable").each((function(){var t=$(this);t.hasClass("footable-lookup")||(t.data().pageSize=e,t.trigger("footable_initialize"))}))}function pasteValue(e){$(pasteTo).val(e).change()}function paste(e){pasteTo=e,clientBridge.paste(),0!=pasteTo.indexOf("#pay_to")&&"#change_address"!=pasteTo||base58.check(pasteTo)}function copy(e,t){var a="";try{a=$(e).text()}catch(e){}null!=a&&null==t||(a="copy"==t?e:$(e).attr(t)),clientBridge.copy(a)}function scanQRCode(){clientBridge.scanQRCode()}function networkAlert(e){$("#network-alert span").text(e).toggle(""!==e)}function openContextMenu(e){-1===contextMenus.indexOf(e)&&contextMenus.push(e),void 0!==e.isOpen&&1===e.isOpen&&(e.isOpen=0,e.close&&e.close());for(var t=0;t<contextMenus.length;++t)contextMenus[t].isOpen=contextMenus[t]==e?1:0}function receivePageInit(){var e=[{name:"Copy&nbsp;Address",fun:function(){copy("#receive .footable .selected .address")}},{name:"Copy&nbsp;Label",fun:function(){copy("#receive .footable .selected .label2")}},{name:"Copy&nbsp;Public&nbsp;Key",fun:function(){copy("#receive .footable .selected .pubkey")}},{name:"Edit",fun:function(){$("#receive .footable .selected .label2.editable").dblclick()}}];$("#receive .footable tbody").on("contextmenu",(function(e){$(e.target).closest("tr").click()})).contextMenu(e,{triggerOn:"contextmenu",sizeStyle:"content"}),$("#filter-address").on("input",(function(){var e=$("#receive-table");""===$("#filter-address").val()&&e.data("footable-filter").clearFilter(),$("#receive-filter").val($("#filter-address").val()+" "+$("#filter-addresstype").val()),e.trigger("footable_filter",{filter:$("#receive-filter").val()})})),$("#filter-addresstype").change((function(){var e=$("#receive-table");""===$("#filter-addresstype").val()&&e.data("footable-filter").clearFilter(),$("#receive-filter").val($("#filter-address").val()+" "+$("#filter-addresstype").val()),e.trigger("footable_filter",{filter:$("#receive-filter").val()})})),$("#receive .footable tbody").on("click","tr.footable-row-detail",(function(){$(this).prev().siblings().removeClass("selected"),$(this).prev().addClass("selected")}))}function clearRecvAddress(){$("#new-address-label").val(""),$("#new-addresstype").val(1),$("#new-recv-address-error").text("")}function addAddress(){console.log("addAddress");var e=$("#new-addresstype").val(),t=$("#new-address-label").val();clientBridge.newAddress(t,e,"",!1)}function clearSendAddress(){$("#new-send-label").val(""),$("#new-send-address").val(""),$("#new-send-address-error").text(""),$("#new-send-address").removeClass("inputError")}function getAddressLabelForSelectorResult(e,t,a){e||(e=a),$(t).val(e).text(e).change()}function addSendAddress(){var e=$("#new-send-address").val();bridge.getAddressLabelAsync(e)}function getAddressLabelResult(e){console.log("getAddressLabelResult");var t,a,n;if(a=$("#new-send-label").val(),t=$("#new-send-address").val(),""!==(n=e))return $("#new-send-address-error").text('Error: address already in addressbook under "'+n+'"'),void $("#new-send-address").addClass("inputError");clientBridge.newAddress(a,0,t,!0)}function newAddressResult(e,t,a,n){e?$("#add-address-modal").modal("hide"):n?lastAddressErrorResult(t):$("#new-recv-address-error").text("Error: "+t)}function lastAddressErrorResult(e){var t=e;$("#new-send-address-error").text("Error: "+t),$("#new-send-address").addClass("inputError")}function addressBookInit(){var e=[{name:"Copy&nbsp;Address",fun:function(){copy("#addressbook .footable .selected .address")}},{name:"Copy&nbsp;Public&nbsp;Key",fun:function(){copy("#addressbook .footable .selected .pubkey")}},{name:"Copy&nbsp;Label",fun:function(){copy("#addressbook .footable .selected .label2")}},{name:"Edit",fun:function(){$("#addressbook .footable .selected .label2.editable").dblclick()}},{name:"Delete",fun:function(){var e=$("#addressbook .footable .selected .address");bridge.deleteAddress(e.text()),e.closest("tr").remove()}}];$("#addressbook .footable tbody").on("contextmenu",(function(e){$(e.target).closest("tr").click()})).contextMenu(e,{triggerOn:"contextmenu",sizeStyle:"content"}),$("#filter-addressbook").on("input",(function(){var e=$("#addressbook-table");""==$("#filter-addressbook").val()&&e.data("footable-filter").clearFilter(),$("#addressbook-filter").val($("#filter-addressbook").val()+" "+$("#filter-addressbooktype").val()),e.trigger("footable_filter",{filter:$("#addressbook-filter").val()})})),$("#filter-addressbooktype").change((function(){var e=$("#addressbook-table");""==$("#filter-addresstype").val()&&e.data("footable-filter").clearFilter(),$("#addressbook-filter").val($("#filter-addressbook").val()+" "+$("#filter-addressbooktype").val()),e.trigger("footable_filter",{filter:$("#addressbook-filter").val()})})),$("#addressbook .footable tbody").on("click","tr.footable-row-detail",(function(){$(this).prev().siblings().removeClass("selected"),$(this).prev().addClass("selected")}))}function appendAddresses(e){if(console.log("appending an address: "+e),"string"==typeof e){if("[]"==e)return;e=JSON.parse(e.replace(/,\]$/,"]"))}e.forEach((function(e){var t=$("#"+e.address),a="S"==e.type?"#addressbook":"#receive";"R"==e.type&&sendPage.initSendBalance(e)&&e.address.length<75&&(0==t.length?$("#message-from-address").append("<option title='"+e.address+"' value='"+e.address+"'>"+e.label+"</option>"):$("#message-from-address option[value="+e.address+"]").text(e.label));e.type,e.pubkey;0==t.length?($(a+" .footable tbody").append("<tr id='"+e.address+"' lbl='"+e.label+"'> <td data-toggle=true></td>     <td>           <span class='label2 editable' data-value='"+e.label_value+"'>"+e.label+"</span> </td>                <td class='address'>"+e.address+"</td>                 <td class='pubkey'>"+e.pubkey+"</td>                 <td class='addresstype'>"+(4==e.at?"Group":3==e.at?"BIP32":2==e.at?TYPE_PRIVATE:TYPE_PUBLIC)+"</td></tr>"),$("#address-lookup-table.footable tbody").append("<tr id='"+e.address+"' lbl='"+e.label+"' class='addressType"+e.type+"'> <td data-toggle=true></td>                 <td><span class='label2' data-value='"+e.label_value+"'>"+e.label+"</span></td>                 <td class='address'>"+e.address+"</td>                 <td class='addresstype'>"+(4==e.at?"Group":3==e.at?"BIP32":2==e.at?TYPE_PRIVATE:TYPE_PUBLIC)+"</td></tr>"),$(a+" #"+e.address).selection("tr").find(".editable").on("dblclick",(function(e){e.stopPropagation(),updateValue($(this))})).attr("data-title","Double click to edit").tooltip()):($("#"+e.address+" .label2").data("value",e.label_value).text(e.label),$("#"+e.address+" .pubkey").text(e.pubkey))})),$("#addressbook .footable, #receive .footable").trigger("footable_setup_paging"),0===$("#addressbook .footable tbody tr.selected").length&&$("#addressbook .footable tbody tr:first").addClass("selected"),0===$("#receive .footable tbody tr.selected").length&&$("#receive .footable tbody tr:first").addClass("selected")}function addressLookup(e,t,a){function n(){$("#address-lookup-filter").val($("#address-lookup-address-filter").val()+" "+$("#address-lookup-address-type").val()),s.trigger("footable_filter",{filter:$("#address-lookup-filter").val()})}var s=$("#address-lookup-table");s.trigger("footable_initialize"),s.data("footable-filter").clearFilter(),$("#address-lookup-table > tbody tr").selection().on("dblclick",(function(){var t=e.split(",");$("#"+t[0]).val($(this).attr("id").trim()).change(),void 0!==t[1]&&$("#"+t[1]).val($(this).attr("lbl").trim()).text($(this).attr("lbl").trim()).change(),$("#address-lookup-modal").modal("hide")})),$("#address-lookup-address-filter").on("input",(function(){""==$("#lookup-address-filter").val()&&s.data("footable-filter").clearFilter(),n()})),$("#address-lookup-address-type").change((function(){""==$("#address-lookup-address-type").val()&&s.data("footable-filter").clearFilter(),n()})),a&&($("#address-lookup-address-type").val(a),n()),t?$("tr.addressTypeS",s).hide():$("tr.addressTypeR",s).hide()}function transactionPageInit(){var e=[{name:"Copy&nbsp;Amount",fun:function(){copy("#transactions .footable .selected .amount","data-value")}},{name:"Copy&nbsp;transaction&nbsp;ID",fun:function(){var e=$("#transactions .footable .selected").attr("id");copy(e.substring(0,e.length-4),"copy")}},{name:"Edit&nbsp;label",fun:function(){$("#transactions .footable .selected .editable").dblclick()}},{name:"Show&nbsp;transaction&nbsp;details",fun:function(){$("#transactions .footable .selected").dblclick()}}];$("#transactions .footable tbody").on("contextmenu",(function(e){$(e.target).closest("tr").click()})).contextMenu(e,{triggerOn:"contextmenu",sizeStyle:"content"}),$("#transactions .footable").on("footable_paging",(function(e){var t=filteredTransactions.slice(e.page*e.size);t=t.slice(0,e.size);var a=$("#transactions .footable tbody");a.html(""),delete e.ft.pageInfo.pages[e.page],e.ft.pageInfo.pages[e.page]=t.map((function(e){var t=Array.isArray(e)?e[0].id:e.id;return e.html=formatTransaction(e),a.append(e.html),$("#"+t)[0]})),e.result=!0,bindTransactionTableEvents()})).on("footable_create_pages",(function(e){var t=$("#transactions .footable");$(t.data("filter")).val()||(filteredTransactions=Transactions);var a=t.data("sorted"),n=1==t.find("th.footable-sorted").length,s="numeric";switch(a){case 1:a="d";break;case 2:a="t_l",s="alpha";break;case 3:a="ad",s="alpha";break;case 4:a="n",s="alpha";break;case 5:a="am";break;default:a="c"}s=e.ft.options.sorters[s],filteredTransactions.sort((function(e,t){var o=Array.isArray(e)?e[0]:e,i=Array.isArray(t)?t[0]:t;return n?s(o[a],i[a]):s(i[a],o[a])})),delete e.ft.pageInfo.pages,e.ft.pageInfo.pages=[];var o=Math.ceil(filteredTransactions.length/e.ft.pageInfo.pageSize),i=[];if(o>0){for(var l=0;l<e.ft.pageInfo.pageSize;l++)i.push([]);for(l=0;l<o;l++)e.ft.pageInfo.pages.push(i)}})).on("footable_filtering",(function(e){e.clear||(filteredTransactions=[],Transactions.forEach((function(t){if(Array.isArray(t)){var a=t.filter((function(t){return filterTransaction(t,e.filter)}));1===a.length?filteredTransactions.push(a[0]):a.length>0&&filteredTransactions.push(a)}else filterTransaction(t,e.filter)&&filteredTransactions.push(t)})))}))}function filterTransaction(e,t){var a;for(a in e)if(-1!==e[a].toString().toLowerCase().indexOf(t.toLowerCase()))return!0;return!1}function formatTransaction(e){if(Array.isArray(e)){var t=e[0].tt;e.length>1&&e[0].tt!==e[e.length-1].tt&&(t="Tx.No. 1:\n"+t,t+="\n-\nTx.No. "+e.length+":\n"+e[e.length-1].tt);var a=0,n="",s=new Set;e.forEach((function(e){s.add(e.ad_d.trim()),e.n&&(n&&(n+="; "),n+=e.n.trim()),a+=e.am}));var o="";return s.forEach((function(e){o&&(o+="; "),o+=e})),"<tr id='"+(i=e[0]).id+"'"+(1===e.length?" data-title='"+i.tt+"'":"")+"><td class='trans-status' data-value='"+i.c+"'"+(e.length>1?" data-title='"+t+"'":"")+"><i class='fa fa-2x "+i.s+"'></td><td class='trans-date' data-value='"+i.d+"'"+(e.length>1?" data-title='"+e[0].d_s+" - "+e[e.length-1].d_s+"'":"")+">"+i.d_s+"</td><td class='amount' style='color:"+i.am_c+";' data-value='"+unit.format(a)+"'>"+unit.format(a)+" "+unit.display+"</td><td class='trans-type-icon'"+(e.length>1?" data-title='"+t+"'":"")+"><img width='100%' src='qrc:///assets/svg/tx_"+i.t+".svg' /></td><td class='trans-type'"+(e.length>1?" data-title='"+t+"'":"")+">"+i.t_l+" <b>&nbsp;(x"+e.length+")</b></td><td class='address' style='color:"+i.a_c+";' data-value='"+o+"' data-label='"+o+"' data-title='"+o+"' ><span>"+(o.length>26?o.substr(0,26)+"...":o)+"</span></td><td class='trans-nar' data-title='"+n+"'>"+n+"</td></tr>"}var i;return"<tr id='"+(i=e).id+"'><td class='trans-status' data-value='"+i.c+"' data-title='"+i.tt+"'><i class='fa fa-2x "+i.s+"'></td><td class='trans-date' data-value='"+i.d+"'>"+i.d_s+"</td><td class='amount' style='color:"+i.am_c+";' data-value='"+i.am_d+"'>"+i.am_d+" "+unit.display+"</td><td class='trans-type-icon'><img width='100%' src='qrc:///assets/svg/tx_"+i.t+".svg' /></td><td class='trans-type'><span>"+i.t_l+"</span></td><td class='address' style='color:"+i.a_c+";' data-value='"+i.ad+"' data-label='"+i.ad_l+"'><span "+(i.ad?"class='editable'":"")+">"+(i.ad_d.length>26?i.ad_d.substr(0,26)+"...":i.ad_d)+"</span></td><td class='trans-nar'>"+i.n+"</td></tr>"}function visibleTransactions(e){"*"!==e[0]&&(RawTransactions=RawTransactions.filter((function(e){return this.some((function(e){return e==this}),e.t_l)}),e),prepareTransactions())}function bindTransactionTableEvents(){$("#transactions .footable tbody td[data-title]").tooltip(),$("#transactions .footable tbody tr[data-title]").tooltip(),$("#transactions .footable tbody tr").on("click",(function(){$(this).addClass("selected").siblings("tr").removeClass("selected")})).on("dblclick",(function(e){$(this).attr("href","#transaction-info-modal"),$("#transaction-info-modal").appendTo("body").modal("show"),bridge.transactionDetails($(this).attr("id")),$(this).click(),$(this).off("click"),$(this).on("click",(function(){$(this).addClass("selected").siblings("tr").removeClass("selected")}))})).find(".editable").on("dblclick",(function(e){e.stopPropagation(),e.preventDefault(),updateValue($(this))})).attr("data-title","Double click to edit").tooltip()}function appendTransactions(e,t){if(console.log(e),"string"==typeof e){if("[]"==e&&!t)return;e=JSON.parse(e.replace(/,\]$/,"]"))}e.sort((function(e,t){return e.d=parseInt(e.d),t.d=parseInt(t.d),t.d-e.d})),t?RawTransactions=e:1==e.length&&-1==e[0].id||(RawTransactions=RawTransactions.filter((function(e){return 0==this.some((function(e){return e.id==this.id}),e)}),e).concat(e)),overviewPage.recent(e.slice(0,7)),prepareTransactions()}function prepareTransactions(){var e=$("select[id=optGroupTxType]").val(),t=$("select[id=optGroupTxTime]").val();if("0"===t)Transactions=RawTransactions;else{var a={};Transactions=[],RawTransactions.forEach((function(n){if("0"===e&&(n.t_i<1||n.t_i>6))Transactions.push(n);else{var s=new Date(1e3*n.d),o=(9!==n.s_i?n.t_i:3===n.t_i||5===n.t_i?1:4===n.t_i||6===n.t_i?2:n.t_i)+"-"+n.s_i;switch(t){case"1":o=s.getDate()+"-"+o;case"2":o=s.getMonth()+"-"+o;case"3":o=s.getFullYear()+"-"+o}var i=a[o];i?i.push(n):(a[o]=[n],Transactions.push(a[o]))}}))}$("#transactions .footable").trigger("footable_redraw")}function getIconTitle(e){return"unverified"==e?"fa fa-cross ":"verified"==e?"fa fa-check ":"contributor"==e?"fa fa-cog ":"spectreteam"==e?"fa fa-code ":""}function signMessage(){var e,t,a;$("#sign-signature").val("");e=$("#sign-address").val().trim(),t=$("#sign-message").val().trim();var n=clientBridge.signMessage(e,t);return a=n.error_msg,n.signed_signature,""!==a?($("#sign-result").removeClass("green"),$("#sign-result").addClass("red"),$("#sign-result").html(a),!1):($("#sign-signature").val(n.signed_signature),$("#sign-result").removeClass("red"),$("#sign-result").addClass("green"),void $("#sign-result").html("Message signed successfully"))}function verifyMessage(){var e,t,a,n;return e=$("#verify-address").val().trim(),t=$("#verify-message").val().trim(),n=$("#verify-signature").val().trim(),""!==(a=bridge.verifyMessage(e,t,n).error_msg)?($("#verify-result").removeClass("green"),$("#verify-result").addClass("red"),$("#verify-result").html(a),!1):($("#verify-result").removeClass("red"),$("#verify-result").addClass("green"),void $("#verify-result").html("Message verified successfully"))}function iscrollReload(e){messagesScroller.refresh(),!0===e&&messagesScroller.scrollTo(0,messagesScroller.maxScrollY,0)}function editorCommand(e,t){var a,n,s,o=$("#message-text")[0];s=o.scrollTop,o.focus(),void 0!==o.selectionStart?(a=o.selectionStart,n=o.selectionEnd,e.length,t&&(e+=o.value.substring(a,n)+t),o.value=o.value.substring(0,a)+e+o.value.substring(n,o.value.length),o.selectionStart=a+e.length-(t?t.length:0),o.selectionEnd=o.selectionStart):o.value+=e+t,o.scrollTop=s,o.focus()}function setupWizard(e){var t=$("#"+e+" > div");backbtnjs='$("#key-options").show(); $("#wizards").hide();',fwdbtnjs='gotoWizard("new-key-wizard", 1);',$("#"+e).prepend("<div id='backWiz' style='display:none;' class='btn btn-default btn-cons wizardback' onclick='"+backbtnjs+"' >Back</div>"),$("#"+e).prepend("<div id='fwdWiz'  style='display:none;' class='btn btn-default btn-cons wizardfwd'  onclick='"+fwdbtnjs+"' >Next Step</div>"),t.each((function(e){$(this).addClass("step"+e),$(this).hide(),$("#backWiz").hide()}))}function gotoWizard(vid,node,dataAndEvents){var collection=$("#wizards > div");if(validateJS=$("#"+vid+" .step"+(node-1)).attr("validateJS"),dataAndEvents&&void 0!==validateJS){var jsonObj=eval(validateJS);if(!jsonObj)return!1}collection.each((function(e){$(this).hide()}));var $allModules=$("#"+vid+" > div[class^=step]"),current=node;null==current&&(current=0),0==current?($("#"+vid+" #backWiz").attr("onclick",'$(".wizardback").hide(); $("#wizards").show();'),$("#"+vid+" #fwdWiz").attr("onclick",'$(".wizardback").hide(); gotoWizard("'+vid+'", 1, true);'),$("#backWiz").hide()):($("#"+vid+" #backWiz").attr("onclick",'gotoWizard("'+vid+'", '+(current-1)+" , false);"),$("#"+vid+" #fwdWiz").attr("onclick",'gotoWizard("'+vid+'", '+(current+1)+" , true);")),endWiz=$("#"+vid+" .step"+node).attr("endWiz"),void 0!==endWiz&&""!==endWiz&&$("#"+vid+" #fwdWiz").attr("onclick",endWiz),$allModules.each((function(e){$(this).hide()})),$("#"+vid).show(),stepJS=$("#"+vid+" .step"+current).attr("stepJS"),dataAndEvents&&void 0!==stepJS&&eval(stepJS),$("#"+vid+" .step"+current).fadeIn(0)}function dumpStrings(){function e(e){return'QT_TRANSLATE_NOOP("SpectreBridge", "'+e+'"),\n'}var t="";$(".translate").each((function(a){var n=e($(this).text().trim());-1==t.indexOf(n)&&(t+=n)})),$("[data-title]").each((function(a){var n=e($(this).attr("data-title").trim());-1==t.indexOf(n)&&(t+=n)})),console.log(t)}function translateStrings(){$(".translate").each((function(e){var t=$(this).text().replace(/\s+/g," ");clientBridge.translateHtmlString(t.trim())})),$("[data-title]").each((function(e){var t=$(this).attr("data-title").replace(/\s+/g," ");clientBridge.translateHtmlString(t.trim())})),$("[placeholder]").each((function(e){var t=$(this).attr("placeholder").replace(/\s+/g," ");clientBridge.translateHtmlString(t.trim())}))}function updateElement(e,t){$(".translate").each((function(a){$(this).text().replace(/\s+/g," ").trim()===e&&$(this).text(t)})),$("[data-title]").each((function(a){var n=$(this).attr("data-title").replace(/\s+/g," ");n.trim()===e&&$(this).attr("data-title",n.replace(n,t))})),$("[placeholder]").each((function(a){var n=$(this).attr("placeholder").replace(/\s+/g," ");n.trim()===e&&$(this).attr("placeholder",n.replace(n,t))})),TYPE_PRIVATE===e&&(TYPE_PRIVATE=t),TYPE_PUBLIC===e&&(TYPE_PUBLIC=t),TYPE_ORPHAN===e&&(TYPE_ORPHAN=t),TYPE_RECEIVED===e&&(TYPE_RECEIVED=t),TYPE_SENT===e&&(TYPE_SENT=t),TYPE_IN_OUT===e&&(TYPE_IN_OUT=t),TYPE_STAKE===e&&(TYPE_STAKE=t),TYPE_DONATED===e&&(TYPE_DONATED=t),TYPE_CONTRIBUTED===e&&(TYPE_CONTRIBUTED=t),TYPE_OTHER===e&&(TYPE_OTHER=t)}var breakpoint=906,base58={base58Chars:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",check:function(e){for(var t=$(e),a=t.val(),n=0,s=a.length;n<s;++n)if(-1==base58.base58Chars.indexOf(a[n]))return t.css("background","#1c5ce5").css("color","white"),!1;return t.css("background","").css("color",""),!0}},pasteTo="",unit={type:0,name:"ALIAS",display:"ALIAS",setType:function(e){switch(this.type=null==e?0:e,e){case 1:this.name="mALIAS",this.display="mALIAS";break;case 2:this.name="uALIAS",this.display="&micro;ALIAS";break;case 3:this.name="satALIAS",this.display="satALIAS";break;default:this.name="ALIAS",this.display="ALIAS"}$("td.unit,span.unit,div.unit").html(this.display),$("select.unit").val(e).trigger("change"),$("input.unit").val(this.name),overviewPage.updateBalance()},format:function(e,t,a){var n=$.isNumeric(e)?null:$(e);switch(t=null==t?this.type:parseInt(t),e=parseInt(null==n?e:null==n.data("value")?n.val():n.data("value")),t){case 1:e/=1e5;break;case 2:e/=100;break;case 3:break;default:e/=1e8}let s=this.mask(t);return e=a&&s>=2?e.countDecimals()>2?e.toString():e.toFixed(2):e.toFixed(s),null==n?e:void n.val(e)},parse:function(e,t){var a=$.isNumeric(e)?null:$(e);t=null==t?this.type:parseInt(t),fp=null==a?e:a.val(),null==fp||fp.length<1?fp=["0","0"]:"."==fp[0]?fp=["0",fp.slice(1)]:fp=fp.split("."),e=parseInt(fp[0]);var n=this.mask(t);if(n>0&&(e*=Math.pow(10,n)),n>0&&fp.length>1){for(var s=fp[1].split("");s.length>1&&"0"==s[s.length-1];)s.pop();var o=parseInt(s.join(""));o>0&&((n-=s.length)>0&&(o*=Math.pow(10,n)),e+=o)}return null==a?e:(a.data("value",e),void this.format(a,t))},mask:function(e){switch(e=null==e?this.type:parseInt(e)){case 1:return 5;case 2:return 2;case 3:return 0;default:return 8}},keydown:function(e){var t=e.which,a=$(e.target).siblings(".unit").val();if(190==t||110==t)return-1===this.value.toString().indexOf(".")&&0!=unit.mask(a)||e.preventDefault(),!0;if(e.shiftKey||!(t>=96&&t<=105||t>=48&&t<=57))8!=t&&9!=t&&17!=t&&46!=t&&45!=t&&(t>=35&&t<=40||(!e.ctrlKey||65!=t&&67!=t&&86!=t&&88!=t)&&e.preventDefault());else{var n=this.selectionStart,s=this.value.indexOf(".");if("Range"!==document.getSelection().type&&n>s&&-1!==this.value.indexOf(".")&&this.value.length-1-s>=unit.mask(a)){if("0"==this.value[this.value.length-1]&&n<this.value.length)return this.value=this.value.slice(0,-1),this.selectionStart=n,void(this.selectionEnd=n);e.preventDefault()}}},paste:function(e){var t=e.originalEvent.clipboardData.getData("text/plain");(!$.isNumeric(t)||-1!==this.value.indexOf(".")&&"Range"!==document.getSelection().type)&&e.preventDefault()}},contextMenus=[],overviewPage={init:function(){this.balance=$(".balance"),this.spectreBal=$(".spectre_balance"),this.reserved=$("#reserved"),this.reservedSpectre=$("#reserved_spectre"),this.stake=$("#stake"),this.spectreStake=$("#spectre_stake"),this.unconfirmed=$("#unconfirmed"),this.spectreUnconfirmed=$("#spectre_unconfirmed"),this.immature=$("#immature"),this.spectreImmature=$("#spectre_immature"),this.total=$("#total")},updateBalance:function(e,t,a,n,s,o,i,l){null==e?(e=this.balance.data("orig"),t=this.spectreBal.data("orig"),a=this.stake.data("orig"),n=this.spectreStake.data("orig"),s=this.unconfirmed.data("orig"),o=this.spectreUnconfirmed.data("orig"),i=this.immature.data("orig"),l=this.spectreImmature.data("orig")):(this.balance.data("orig",e),this.spectreBal.data("orig",t),this.stake.data("orig",a),this.spectreStake.data("orig",n),this.unconfirmed.data("orig",s),this.spectreUnconfirmed.data("orig",o),this.immature.data("orig",i),this.spectreImmature.data("orig",l)),this.formatValue("balance","spectreBal",e,t,!0),this.formatValue("stake","spectreStake",a,n),this.formatValue("unconfirmed","spectreUnconfirmed",s,o),this.formatValue("immature","spectreImmature",i,l),this.formatTotalValue(e+t+a+n+s+o+i+l)},updateReserved:function(e){this.formatValue("reserved","reservedSpectre",e,e)},formatTotalValue:function(e){var t=["0","0"];void 0===e||isNaN(e)||(t=unit.format(e).split(".")),$("#total-big > span:first-child").text(t[0]),3==unit.type?($("#total-big .light-red").toggle(!1),$("#total-big .cents").toggle(!1)):($("#total-big .cents").text(t[1]),$("#total-big .light-red").toggle(!0),$("#total-big .cents").toggle(!0))},formatValue:function(e,t,a,n,s){var o=this[e],i=this[t];0!==a||s?o.text(unit.format(a)):o.html(""),0!==n||s?i.text(unit.format(n)):i.html(""),s||0!==a||0!==n?o.parent("tr").show():o.parent("tr").hide()},recent:function(e){for(var t=0;t<e.length;t++)overviewPage.updateTransaction(e[t]);$("#recenttxns [data-title]").tooltip()},updateTransaction:function(e){var t,a,n=(a=8===(t=e).s_i||9===t.s_i?TYPE_ORPHAN:"input"==t.t?TYPE_RECEIVED:"output"==t.t?TYPE_SENT:"inout"==t.t?TYPE_IN_OUT:"staked"==t.t?TYPE_STAKE:"donated"==t.t?TYPE_DONATED:"contributed"==t.t?TYPE_CONTRIBUTED:"other"==t.t?TYPE_OTHER:t.t,"<tr><td width='30%' style='border-top: 1px solid rgba(230, 230, 230, 0.7);border-bottom: none;' data-title='"+t.tt+"'><label style='margin-top:6px;' class='label label-important inline fs-12'>"+a+"</label></td><td style='border-top: 1px solid rgba(230, 230, 230, 0.7);border-bottom: none;'><a id='"+t.id.substring(t.id.length-20)+"' href='#' onclick='$(\"#navitems [href=#transactions]\").click();$(\"#"+t.id+" > td.amount\").click();'> "+unit.format(t.am,0,!0)+" <span class='unit'>"+unit.display+" ("+("PRIVATE"===t.am_curr?"private":"public")+")</span></a></td><td width='30%' style='border-top: 1px solid rgba(230, 230, 230, 0.7);border-bottom: none;'><span class='overview_date' data-value='"+t.d+"'>"+t.d_s+"</span></td></tr>"),s=e.id.substring(e.id.length-20),o=$("#"+s).attr("data-title",e.tt).closest("tr");if(0==o.length){for(var i=$("#recenttxns tr"),l=!1,r=0;r<i.length;r++){var c=$(i[r]);if(parseInt(e.d)>parseInt(c.find(".overview_date").data("value"))){c.before(n),l=!0;break}}for(l||$("#recenttxns").append(n),i=$("#recenttxns tr");i.length>8;)$("#recenttxns tr:last").remove(),i=$("#recenttxns tr")}else o.replaceWith(n)},clientInfo:function(){$("#version").text(bridge.info.build.replace(/\-[\w\d]*$/,"")),$("#clientinfo").attr("data-title","Build Desc: "+bridge.info.build+"\nBuild Date: "+bridge.info.date).tooltip()},encryptionStatusChanged:function(e){e}},optionsPage={init:function(){},connectSignals:function(){bridge.getOptionResult.connect(this.getOptionResult)},getOptionResult:function(e){function t(e){var t=(e=$(this)).prop("checked"),a=e.data("linked");if(a){a=a.split(" ");for(var n=0;n<a.length;n++){var s=$("#"+a[n]+",[for="+a[n]+"]").attr("disabled",!t);t?s.removeClass("disabled"):s.addClass("disabled")}}}bridge.info.options=e;var a,n=e;for(a in console.log("result"),console.log(e),$("#options-ok,#options-apply").addClass("disabled"),n){var s=$("#opt"+a),o=n[a],i=n["opt"+a];if(0!=s.length){var l;if(i)for(l in s.html(""),i)if("string"==typeof l&&$.isArray(i[l])&&!$.isNumeric(l)){s.append("<optgroup label='"+l[0].toUpperCase()+l.slice(1)+"'>");for(var r=0;r<i[l].length;r++)s.append("<option>"+i[l][r]+"</option>")}else s.append("<option"+($.isNumeric(l)?"":" value='"+l+"'")+">"+i[l]+"</option>");s.is(":checkbox")?(s.prop("checked",!0===o||"true"===o),s.off("change"),s.on("change",t),s.change()):s.is("select[multiple]")&&("*"===o||Array.isArray(o)&&o.length>0&&"*"===o[0])?s.find("option").attr("selected",!0):(s.hasClass("amount")&&(s.data("value",o),o=unit.format(o,0)),s.val(o)),s.one("change",(function(){$("#options-ok,#options-apply").removeClass("disabled")}))}else-1==a.indexOf("opt")&&console.log("Option element not available for %s",a)}},update:function(){bridge.getOptions()},save:function(){var e,t=bridge.info.options,a={};for(e in t){var n=$("#opt"+e),s=t[e],o=!1;null!=s&&"false"!=s||(s=!1),0!=n.length&&(n.is(":checkbox")?o=n.prop("checked"):n.is("select[multiple]")?null===(o=n.val())&&(o="*"):(o=n.val(),n.hasClass("amount")&&(o=unit.parse(o,0))),s!=o&&s.toString()!==o.toString()&&(a[e]=o))}$.isEmptyObject(a)?console.log("options cache is empty"):(console.log("calling bridge.userAction.optionsChanged"),bridge.userAction({optionsChanged:a}),optionsPage.update(),a.hasOwnProperty("AutoRingSize")&&changeTxnType())}},RawTransactions=[],Transactions=[],filteredTransactions=[],current_key="",chainDataPage={anonOutputs:{},connectSignals:function(){console.log("chainDataPage.connectSignals"),bridge.listAnonOutputsResult.connect(this.listAnonOutputsResult)},init:function(){$("#show-own-outputs,#show-all-outputs").on("click",(function(e){$(e.target).hide().siblings("a").show()})),$("#show-own-outputs").on("click",(function(){$("#chaindata .footable tbody tr>td:first-child+td").each((function(){0==$(this).text()&&$(this).parents("tr").hide()}))})),$("#show-all-outputs").on("click",(function(){$("#chaindata .footable tbody tr:hidden").show()}))},updateAnonOutputs:function(){bridge.listAnonOutputs()},listAnonOutputsResult:function(e){chainDataPage.anonOutputs=e;var t=$("#chaindata .footable tbody");for(value in t.html(""),chainDataPage.anonOutputs){var a=chainDataPage.anonOutputs[value];t.append("<tr>  <td data-toggle=true></td>                  <td data-value="+value+">"+a.value_s+"</td>                    <td>"+a.owned_outputs+(a.owned_outputs==a.owned_mature?"":" (<b>"+(a.owned_outputs-a.owned_mature)+"</b>)")+"</td>                    <td>"+a.system_unspent+(a.system_unspent==a.system_unspent_mature?"":" (<b>"+(a.system_unspent-a.system_unspent_mature)+"</b>)")+"</td>                    <td>"+a.system_mixins+(a.system_mixins==a.system_mixins_mature?"":" (<b>"+(a.system_mixins-a.system_mixins_mature)+"</b>)")+"</td>                    <td>"+a.system_outputs+(0==a.system_compromised?"":" (<b>"+a.system_compromised+"</b>)")+"</td>                    <td>"+a.least_depth+"</td>                </tr>")}$("#chaindata .footable").trigger("footable_initialize")}},blockExplorerPage={blockHeader:{},connectSignals:function(){console.log("blockExplorerPage.connectSignals"),bridge.findBlockResult.connect(this.findBlockResult),bridge.listLatestBlocksResult.connect(this.listLatestBlocksResult),bridge.listTransactionsForBlockResult.connect(this.listTransactionsForBlockResult),bridge.txnDetailsResult.connect(this.txnDetailsResult),bridge.blockDetailsResult.connect(this.blockDetailsResult)},findBlock:function(e){console.log("findBlock : function(value)"),console.log(e),""===e||null===e?blockExplorerPage.updateLatestBlocks():bridge.findBlock(e)},findBlockResult:function(e){if(console.log("findBlockResult : function(result)"),blockExplorerPage.foundBlock=e,blockExplorerPage.foundBlock,""!==blockExplorerPage.foundBlock.error_msg)return $("#latest-blocks-table  > tbody").html(""),$("#block-txs-table > tbody").html(""),$("#block-txs-table").addClass("none"),alert(blockExplorerPage.foundBlock.error_msg),!1;var t=$("#latest-blocks-table  > tbody");t.html(""),$("#block-txs-table  > tbody").html(""),$("#block-txs-table").addClass("none"),t.append("<tr data-value="+blockExplorerPage.foundBlock.block_hash+">                                     <td>"+blockExplorerPage.foundBlock.block_hash+"</td>                                     <td>"+blockExplorerPage.foundBlock.block_height+"</td>                                     <td>"+blockExplorerPage.foundBlock.block_timestamp+"</td>                                     <td>"+blockExplorerPage.foundBlock.block_transactions+"</td>                        </tr>"),blockExplorerPage.prepareBlockTable()},updateLatestBlocks:function(){blockExplorerPage.latestBlocks=bridge.listLatestBlocks()},listLatestBlocksResult:function(e){console.log("function listLatestBlocksResult"),console.log(e),blockExplorerPage.latestBlocks=e,$("#block-txs-table  > tbody").html(""),$("#block-txs-table").addClass("none");var t=$("#latest-blocks-table  > tbody");for(value in t.html(""),blockExplorerPage.latestBlocks){var a=blockExplorerPage.latestBlocks[value];t.append("<tr data-value="+a.block_hash+">                         <td>"+a.block_hash+"</td>                         <td>"+a.block_height+"</td>                         <td>"+a.block_timestamp+"</td>                         <td>"+a.block_transactions+"</td>                         </tr>")}blockExplorerPage.prepareBlockTable()},prepareBlockTable:function(){$("#latest-blocks-table  > tbody tr").selection().on("click",(function(){var e=$(this).attr("data-value").trim();blockExplorerPage.blkTxns=bridge.listTransactionsForBlock(e)})).on("dblclick",(function(e){$("#block-info-modal").appendTo("body").modal("show"),selectedBlock=bridge.blockDetails($(this).attr("data-value").trim())})).find(".editable")},listTransactionsForBlockResult:function(e,t){blockExplorerPage.blkTxns=t;var a=$("#block-txs-table  > tbody");for(value in a.html(""),blockExplorerPage.blkTxns){var n=blockExplorerPage.blkTxns[value];a.append("<tr data-value="+n.transaction_hash+">                                    <td>"+n.transaction_hash+"</td>                                    <td>"+n.transaction_value+"</td>                                    </tr>")}$("#block-txs-table").removeClass("none"),$("#block-txs-table > tbody tr").selection().on("dblclick",(function(t){$("#blkexp-txn-modal").appendTo("body").modal("show"),selectedTxn=bridge.txnDetails(e,$(this).attr("data-value").trim())})).find(".editable")},txnDetailsResult:function(e){selectedTxn=e,""==selectedTxn.error_msg&&($("#txn-hash").html(selectedTxn.transaction_hash),$("#txn-size").html(selectedTxn.transaction_size),$("#txn-rcvtime").html(selectedTxn.transaction_rcv_time),$("#txn-minetime").html(selectedTxn.transaction_mined_time),$("#txn-blkhash").html(selectedTxn.transaction_block_hash),$("#txn-reward").html(selectedTxn.transaction_reward),$("#txn-confirmations").html(selectedTxn.transaction_confirmations),$("#txn-value").html(selectedTxn.transaction_value),$("#error-msg").html(selectedTxn.error_msg),selectedTxn.transaction_reward>0?($("#lbl-reward-or-fee").html("<strong>Reward</strong>"),$("#txn-reward").html(selectedTxn.transaction_reward)):($("#lbl-reward-or-fee").html("<strong>Fee</strong>"),$("#txn-reward").html(-1*selectedTxn.transaction_reward)));var t=$("#txn-detail-inputs > tbody");for(value in t.html(""),selectedTxn.transaction_inputs){var a=selectedTxn.transaction_inputs[value];t.append("<tr data-value="+a.input_source_address+">                                                   <td>"+a.input_source_address+"</td>                                                   <td style='text-align:right'>"+a.input_value+"</td>                                                </tr>")}var n=$("#txn-detail-outputs > tbody");for(value in n.html(""),selectedTxn.transaction_outputs){var s=selectedTxn.transaction_outputs[value];n.append("<tr data-value="+s.output_source_address+">                                                 <td>"+s.output_source_address+"</td>                                                 <td style='text-align:right'>"+s.output_value+"</td>                                            </tr>")}},blockDetailsResult:function(e){selectedBlock=e,selectedBlock&&($("#blk-hash").html(selectedBlock.block_hash),$("#blk-numtx").html(selectedBlock.block_transactions),$("#blk-height").html(selectedBlock.block_height),$("#blk-type").html(selectedBlock.block_type),$("#blk-reward").html(selectedBlock.block_reward),$("#blk-timestamp").html(selectedBlock.block_timestamp),$("#blk-merkleroot").html(selectedBlock.block_merkle_root),$("#blk-prevblock").html(selectedBlock.block_prev_block),$("#blk-nextblock").html(selectedBlock.block_next_block),$("#blk-difficulty").html(selectedBlock.block_difficulty),$("#blk-bits").html(selectedBlock.block_bits),$("#blk-size").html(selectedBlock.block_size),$("#blk-version").html(selectedBlock.block_version),$("#blk-nonce").html(selectedBlock.block_nonce)),$(this).click().off("click").selection()}},walletManagementPage={connectSignals:function(){console.log("walletManagementPage.connectSignals"),bridge.importFromMnemonicResult.connect(this.importFromMnemonicResult),bridge.getNewMnemonicResult.connect(this.getNewMnemonicResult),bridge.extKeyAccListResult.connect(this.extKeyAccListResult),bridge.extKeyListResult.connect(this.extKeyListResult),bridge.extKeySetDefaultResult.connect(this.extKeySetDefaultResult),bridge.extKeySetMasterResult.connect(this.extKeySetMasterResult),bridge.extKeySetActiveResult.connect(this.extKeySetActiveResult)},init:function(){setupWizard("new-key-wizard"),setupWizard("recover-key-wizard"),setupWizard("open-key-wizard")},newMnemonic:function(){bridge.getNewMnemonic($("#new-account-passphrase").val(),$("#new-account-language").val())},getNewMnemonicResult:function(e){var t=e,a=t.error_msg,n=t.mnemonic;""!==a?alert(a):$("#new-key-mnemonic").val(n)},compareMnemonics:function(){return $("#new-key-mnemonic").val().trim()==$("#validate-key-mnemonic").val().trim()?($("#validate-key-mnemonic").removeClass("red"),$("#validate-key-mnemonic").val(""),!0):($("#validate-key-mnemonic").addClass("red"),alert("The recovery phrase you provided does not match the recovery phrase that was generated earlier - please go back and check to make sure you have copied it down correctly."),!1)},gotoPage:function(e){$("#navitems a[href='#"+e+"']").trigger("click")},prepareAccountTable:function(){$("#extkey-account-table  > tbody tr").selection().on("click",(function(){$("#extkey-table > tbody > tr").removeClass("selected")}))},updateAccountList:function(){bridge.extKeyAccList()},extKeyAccListResult:function(e){walletManagementPage.accountList=e;var t=$("#extkey-account-table  > tbody");for(value in t.html(""),walletManagementPage.accountList){e=walletManagementPage.accountList[value];t.append("<tr data-value="+e.id+" active-flag="+e.active+">                         <td>"+e.id+"</td>                         <td>"+e.label+"</td>                         <td>"+e.created_at+'</td>                         <td class="center-margin"><i style="font-size: 1.2em; margin: auto;" '+("true"==e.active?'class="fa fa-circle green-circle"':'class="fa fa-circle red-circle"')+' ></i></td>                         <td style="font-size: 1em; margin-bottom: 6px;">'+(void 0!==e.default_account?"<i class='center fa fa-check'></i>":"")+"</td>                         </tr>")}walletManagementPage.prepareAccountTable()},prepareKeyTable:function(){$("#extkey-table  > tbody tr").selection().on("click",(function(){$("#extkey-account-table > tbody > tr").removeClass("selected")}))},updateKeyList:function(){bridge.extKeyList()},extKeyListResult:function(e){walletManagementPage.keyList=e;var t=$("#extkey-table  > tbody");for(value in t.html(""),walletManagementPage.keyList){var a=walletManagementPage.keyList[value];t.append("<tr data-value="+a.id+" active-flag="+a.active+">                         <td>"+a.id+"</td>                         <td>"+a.label+"</td>                         <td>"+a.path+'</td>                         <td><i style="font-size: 1.2em; margin: auto;" '+("true"==a.active?'class="fa fa-circle green-circle"':'class="fa fa-circle red-circle"')+' ></i></td>                         <td style="font-size: 1em; margin-bottom: 6px;">'+(void 0!==a.current_master?"<i class='center fa fa-check'></i>":"")+"</td>                         </tr>")}walletManagementPage.prepareKeyTable()},newKey:function(){bridge.importFromMnemonic($("#new-key-mnemonic").val().trim(),$("#new-account-passphrase").val().trim(),$("#new-account-label").val().trim(),$("#new-account-bip44").prop("checked"),0)},importFromMnemonicResult:function(e){if(""!==e.error_msg)return alert(e.error_msg),!1},recoverKey:function(){bridge.importFromMnemonic($("#recover-key-mnemonic").val().trim(),$("#recover-passphrase").val().trim(),$("#recover-account-label").val().trim(),$("#recover-bip44").prop("checked"),1443657600)},setMaster:function(){return $("#extkey-table tr.selected").length?(selected=$("#extkey-table tr.selected").attr("data-value").trim(),void 0===selected||""===selected?(alert("Select a key from the table to set a Master."),!1):(result=bridge.extKeySetMaster(selected),""!==result.error_msg?(alert(result.error_msg),!1):void walletManagementPage.updateKeyList())):(alert("Please select a key to set it as master."),!1)},extKeySetMasterResult:function(e){},setDefault:function(){return $("#extkey-account-table tr.selected").length?(selected=$("#extkey-account-table tr.selected").attr("data-value").trim(),void 0===selected||""===selected?(alert("Select an account from the table to set a default."),!1):(result=bridge.extKeySetDefault(selected),""!==result.error_msg?(alert(result.error_msg),!1):void walletManagementPage.updateAccountList())):(alert("Please select an account to set it as default."),!1)},extKeySetDefaultResult:function(e){},changeActiveFlag:function(){var e=!1,t=$("#extkey-account-table tr.selected"),a=$("#extkey-table tr.selected");return t.length||a.length?(t.length?(selected=t.attr("data-value").trim(),active=t.attr("active-flag").trim(),e=!0):(selected=a.attr("data-value").trim(),active=a.attr("active-flag").trim()),void 0===selected||""===selected?(alert("Please select an account or key to change the active status."),!1):(result=bridge.extKeySetActive(selected,active),""!==result.error_msg?(alert(result.error_msg),!1):void(e?walletManagementPage.updateAccountList():walletManagementPage.updateKeyList()))):(alert("Please select an account or key to change the active status."),!1)},extKeySetActiveResult:function(e){}};function resizeTableBodies(){var e=$(window).height()<480||$(window).width()<480?$(window).height()-$("#transactions nav.navbar").height()-$("#transactions-table > thead").height()-$("#transactions-table > tfoot").height()-10:$(window).height()-$("#transactions-table > tbody").offset().top-$("#transactions-table > tfoot").height()-10;$("#transactions-table > tbody").height(e);var t=$(window).height()<480||$(window).width()<480?$(window).height()-$("#chaindata nav.navbar").height()-$("#chaindata-table > thead").height()-$("#chaindata-table > tfoot").height()-10:$("#chaindata-table > tbody").height(t)}window.onload=function(){overviewPage.init(),receivePageInit(),transactionPageInit(),addressBookInit(),chainDataPage.init(),walletManagementPage.init(),$(".footable,.footable-lookup").footable({breakpoints:{phone:480,tablet:700},delay:50}).on({footable_breakpoint:function(){},footable_row_expanded:function(e){$(this).find(".editable").off("dblclick").on("dblclick",(function(e){e.stopPropagation(),updateValue($(this))})).attr("data-title","Double click to edit").tooltip()}}),$(".editable").on("dblclick",(function(e){e.stopPropagation(),updateValue($(this))})).attr("data-title","Double click to edit %column%"),window.onresize=function(e){window.innerWidth>breakpoint&&$("#layout").removeClass("active"),setTimeout(resizeTableBodies,50)},window.sidebarMouseEnter=!1,window.sidebarMouseEnterTimeout=void 0,$(".sidebar-menu").on({mouseenter:function(e){window.sidebarMouseEnter=!0,window.sidebarMouseEnterTimeout=setTimeout((function(){window.sidebarMouseEnter=!1}),25)},mouseleave:function(e){window.sidebarMouseEnter=!1,clearTimeout(window.sidebarMouseEnterTimeout)}}),$(".sidebar-menu a[href]").on({click:function(e){e.originalEvent&&(!$("body").hasClass("sidebar-visible")||window.sidebarMouseEnter?$(this).closest("li").hasClass("open")?(e.stopImmediatePropagation(),window.sidebarMouseEnter||$(".page-sidebar").mouseenter()):$(this).next().hasClass("sub-menu")?window.sidebarMouseEnter||$(".page-sidebar").mouseenter():window.sidebarMouseEnter&&$(".page-sidebar").mouseleave():$(this).next().hasClass("sub-menu")||$(".page-sidebar").mouseleave(),($(window).height()<480||$(window).width()<480&&!$(this).closest("li").hasClass("open"))&&("#transactions"===$(this).attr("href")?document.querySelector("#transactions").scrollIntoView({behavior:"smooth"}):"#chaindata"===$(this).attr("href")&&document.querySelector("#chaindata").scrollIntoView({behavior:"smooth"})))}}),$("[href='#about']").on("click",(function(){clientBridge.userAction(["aboutClicked"])})),$(".footable > tbody tr").selection();var e=new URLSearchParams(window.location.search),t="ws://127.0.0.1:"+(e.has("websocketport")?e.get("websocketport"):52471)+"/?token="+e.get("token");console.log("Connecting to Core WebSocket server at "+t+".");var a=new WebSocket(t);a.onopen=function(){new QWebChannel(a,(function(e){window.bridge=e.objects.bridge,window.walletModel=e.objects.walletModel,window.optionsModel=e.objects.optionsModel,connectSignals(),resizeTableBodies()}))},a.onerror=function(e){console.log("Core WebSocket connection error: "+e)},a.onclose=function(e){console.log("Core WebSocket connection is closed: "+e.code+" - "+e.reason)};var n="ws://127.0.0.1:"+((e.has("websocketport")?e.get("websocketport"):52471)+1)+"/?token="+e.get("token");console.log("Connecting to Client WebSocket server at "+n+".");var s=new WebSocket(n);s.onopen=function(){new QWebChannel(s,(function(e){window.clientBridge=e.objects.clientBridge,connectClientSignals()}))},s.onerror=function(e){console.log("Client WebSocket connection error: "+e)},s.onclose=function(e){console.log("Client WebSocket connection is closed: "+e.code+" - "+e.reason)}},$.fn.selection=function(e){return e||(e="tr"),this.on("click",(function(){$(this).addClass("selected").siblings(e).removeClass("selected")}))};
